  <!DOCTYPE html>
  <html>
    <head>
      <meta charset="utf-8">
      <title>Drawing...</title>
    </head>
    <body>
      <canvas id="myCanvas" width="1800" height="900" style="background: #000;">Your browser does not support the HTML5 canvas tag.</canvas>

      <script>
         var ws = new WebSocket("ws://localhost:8000/ws");

          ws.onmessage = function (evt) {
            const line = JSON.parse(evt.data);
            draw(line);
          };

          const c = document.getElementById("myCanvas");
          c.addEventListener("click", penTool);
          c.addEventListener("mousedown", setLastCoords);
          c.addEventListener("mousemove", freeForm);

          const ctx = c.getContext("2d");

          function setLastCoords(e) {
              const {x, y} = c.getBoundingClientRect();
              last_x = e.clientX - x;
              last_y = e.clientY - y;
          }

          function freeForm(e) {
              if (e.buttons !== 1) return; // left button is not pushed yet
              penTool(e);
          }

          function penTool(e) {
              const {x, y} = c.getBoundingClientRect();
              const new_x = e.clientX - x;
              const new_y = e.clientY - y;

              const line = {
                last_x,
                last_y,
                new_x,
                new_y
              };

              draw(line);
              ws.send(JSON.stringify(line));

              last_x = new_x;
              last_y = new_y;
          }

          function draw(line) {
              ctx.beginPath();
              ctx.lineWidth = 3;
              ctx.moveTo(line.last_x, line.last_y);
              ctx.lineTo(line.new_x, line.new_y);
              ctx.strokeStyle = 'white';
              ctx.stroke();
              ctx.closePath();
          }

          let last_x = 0;
          let last_y = 0;
      </script>
    </body>
  </html>